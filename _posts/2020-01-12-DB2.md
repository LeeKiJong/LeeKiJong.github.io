---
layout: post
title:  "회원 가입 및 정보 프로그래밍"
date:   2020-01-12
author: LeeKiJong
categories: DB
comments : true
tags: JAVA DB
cover:  "/assets/java.jpg"
---
<h2>회원 가입 및 정보 프로그래밍</h2>  
가장 기본적인 회원 가입, 회원 탈퇴, 회원정보 수정, 로그인, 로그아웃 등의 기능을 가진 프로그래밍입니다.
![1](https://user-images.githubusercontent.com/52438368/72042875-06c16200-32f3-11ea-8f8c-91cbaf4adbdd.PNG)  

<h4>join.html</h4>
```html
<body>
	<form action = "JoinOK" method="post">
		이름: <input type="text" name = "name" size ="10"><br/>
		아이디: <input type="text" name = "id" size ="10"><br/>
		비밀번호: <input type=text name = "pw" size ="10"><br/>
		전화번호: <select name ="phone1">
			<option value = "010">010</option>
			<option value = "016">016</option>
			<option value = "017">017</option>
			<option value = "018">018</option>
			<option value = "019">019</option>
			<option value = "011">011</option>
		</select>
		<input type="text" name = "phone2" size="5"> + <input type="text" name = "phone3" size="5"><br/>
		성별구분: <input type ="radio" name ="gender" value = "man">남	&nbsp; <input type ="radio" name ="gender" value = "woman">여<br/>
		<input type ="submit" value = "회원가입"><input type = "reset" value="취소">
	</form>
</body>
```
<h4>JoinOK.java</h4>
```java
public class JoinOK extends HttpServlet {
	private static final long serialVersionUID = 1L;
	Connection connection;
	Statement statement;
	ResultSet resultset;
	private String name;
	private String id;
	private String pw;
	private String phone1;
	private String phone2;
	private String phone3;
	private String gender;
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public JoinOK() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		System.out.println("doGet");
		actionDo(request, response);
		
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		System.out.println("doPost");
		actionDo(request, response);;
	}
	private void actionDo(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{
		request.setCharacterEncoding("EUC-KR");
		
		name = request.getParameter("name");
		id = request.getParameter("id");
		pw = request.getParameter("pw");
		phone1 = request.getParameter("phone1");
		phone2 = request.getParameter("phone2");
		phone3 = request.getParameter("phone3");
		gender = request.getParameter("gender");
		
		String query = "insert into member values('" + name + "', '" + id + "', '" + pw + "', '" +phone1 + "', '" + phone2 + "', '" + phone3 + "', '" + gender + "')";

		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "leekijong", "0583");
			statement = connection.createStatement();
			int i = statement.executeUpdate(query);
			if(i==1) {
				System.out.println("insert success");
				response.sendRedirect("joinResult.jsp");
			}
			else {
				System.out.println("insert fail");
				response.sendRedirect("join.html");
			}
			
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				if(statement!=null) statement.close();
				if(connection!=null) connection.close();
			} catch (Exception e2) {
				// TODO: handle exception
			}
		}
	}
}
```
<h4>joinResult.jsp</h4>
```html
<body>

	회원가입이 정상 처리 되었습니다.<br/>
	<a href = "login.html">로그인</a>
</body>
```

<h4>LoginOK.java</h4>
```html
public class LoginOK extends HttpServlet {
	private static final long serialVersionUID = 1L;
    
	Connection connection;
	Statement statement;
	ResultSet resultset;
	
	private String name;
	private String id;
	private String pw;
	private String phone1;
	private String phone2;
	private String phone3;
	private String gender;
	private String[] hobbys;
    /**
     * @see HttpServlet#HttpServlet()
     */
    public LoginOK() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		actionDo(request, response);
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		actionDo(request, response);
	}
	protected void actionDo(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		id = request.getParameter("id");
		pw = request.getParameter("pw");
		String query = "select * from member where id = '" + id + "' and pw = '" + pw + "'";
		
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl", "leekijong", "0583");
			statement = connection.createStatement();
			resultset = statement.executeQuery(query);
			
			while(resultset.next()) {
				name = resultset.getString("name");
				id = resultset.getString("id");
				pw = resultset.getString("pw");
				phone1 = resultset.getString("phone1");
				phone2 = resultset.getString("phone2");
				phone3 = resultset.getString("phone3");
				gender = resultset.getString("gender");
			}
			
			HttpSession httpSession = request.getSession();
			httpSession.setAttribute("name", name);
			httpSession.setAttribute("id", id);
			httpSession.setAttribute("pw", pw);
			
			response.sendRedirect("loginResult.jsp");
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
			if(resultset != null) resultset.close();
			if(statement != null) statement.close();
			if(connection != null) statement.close();
			} catch(Exception e2) {
				
			}
		}
	}
}
```
